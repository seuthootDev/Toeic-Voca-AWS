(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{7252:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(5155),a=r(2115),l=r(5695),i=r(7168),n=r(8482),c=r(5295),m=r(3580),o=r(646);let d=(0,r(9946).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function h(){let e=(0,l.useRouter)(),[t,r]=(0,a.useState)(!0),[h,x]=(0,a.useState)([]),[g,p]=(0,a.useState)(0),[u,y]=(0,a.useState)(null),[b,f]=(0,a.useState)(!1),[w,j]=(0,a.useState)(!1),[N,v]=(0,a.useState)(0),[k,S]=(0,a.useState)(!1),[C,R]=(0,a.useState)([]);(0,a.useEffect)(()=>{!(h.length>0)&&(S("true"===localStorage.getItem("isLoggedIn")),(async()=>{try{let e=await fetch("/api/words",{credentials:"include"});if(!e.ok)throw Error("단어 데이터를 가져오는데 실패했습니다.");let t=await e.json();x(t),v(1/t.length*100),r(!1)}catch(e){console.error("단어 데이터 로딩 실패:",e),r(!1)}})())},[h.length]);let I=e=>{try{localStorage.setItem("toeicWords",JSON.stringify(e))}catch(e){console.error("Error saving words to localStorage:",e),(0,m.oR)({title:"저장 오류",description:"단어 상태를 저장하는데 실패했습니다.",variant:"destructive"})}},E=e=>{if(b)return;y(e),f(!0);let t=h[g],r=e===t.korean;j(r);let s=[...h];s[g]={...s[g],isKnown:r},x(s),I(s),r?(0,m.oR)({title:"정답입니다!",description:"".concat(t.english,"의 뜻은 ").concat(t.korean,"입니다.")}):(0,m.oR)({title:"오답입니다!",description:"".concat(t.english,"의 뜻은 ").concat(t.korean,"입니다."),variant:"destructive"})},_=async()=>{try{await fetch("/api/logout",{method:"POST",credentials:"include"}),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userid"),S(!1),(0,m.oR)({title:"로그아웃",description:"로그아웃 되었습니다."}),e.push("/login")}catch(e){(0,m.oR)({title:"오류",description:"로그아웃 중 문제가 발생했습니다.",variant:"destructive"})}};if(t)return(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-primary-100",children:(0,s.jsx)("p",{className:"text-primary-700",children:"단어를 불러오는 중..."})});if(0===h.length)return(0,s.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center bg-primary-100 p-4",children:(0,s.jsxs)(n.Zp,{className:"w-full max-w-md border-primary-200 shadow-lg",children:[(0,s.jsxs)(n.aR,{className:"bg-primary text-white rounded-t-lg",children:[(0,s.jsx)(n.ZB,{children:"단어가 없습니다"}),(0,s.jsx)(n.BT,{className:"text-primary-100",children:"단어 데이터를 불러올 수 없습니다."})]}),(0,s.jsx)(n.wL,{className:"bg-white p-4",children:(0,s.jsx)(i.$,{onClick:()=>e.push("/login"),className:"w-full bg-primary hover:bg-primary-700 touch-target",children:"홈으로 돌아가기"})})]})});let K=h[g];return(0,s.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center bg-primary-100 p-3 md:p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-[95%] sm:max-w-md",children:[k&&(0,s.jsxs)("div",{className:"mb-3 md:mb-4 flex justify-between items-center",children:[(0,s.jsxs)("p",{className:"text-xs md:text-sm text-primary-700",children:[localStorage.getItem("userid")," 님"]}),(0,s.jsx)(i.$,{variant:"ghost",size:"sm",onClick:_,className:"text-primary hover:text-primary-700 h-8 text-xs md:text-sm px-2 touch-target",children:"로그아웃"})]}),(0,s.jsxs)("div",{className:"mb-3 md:mb-4",children:[(0,s.jsx)(c.k,{value:N,className:"h-2 bg-primary-200"}),(0,s.jsxs)("p",{className:"mt-1 md:mt-2 text-right text-xs md:text-sm text-primary-700",children:[g+1," / ",h.length]})]}),(0,s.jsxs)(n.Zp,{className:"mb-3 md:mb-4 border-primary-200 shadow-lg overflow-hidden",children:[(0,s.jsxs)(n.aR,{className:"bg-primary text-white p-3 md:p-4",children:[(0,s.jsx)(n.ZB,{className:"text-center text-xl md:text-2xl",children:K.english}),(0,s.jsx)(n.BT,{className:"text-center text-primary-100 text-xs md:text-sm",children:"아래 보기 중 올바른 뜻을 선택하세요"})]}),(0,s.jsx)(n.Wu,{className:"p-3 md:p-6",children:(0,s.jsx)("div",{className:"space-y-2 md:space-y-3",children:K.options.map((e,t)=>(0,s.jsx)("button",{onClick:()=>E(e),disabled:b,className:"w-full p-2 md:p-3 rounded-lg text-left transition-all text-sm md:text-base touch-target ".concat(b&&e===K.korean?"bg-green-100 border-2 border-green-500 text-green-700":b&&e===u?"bg-red-100 border-2 border-red-500 text-red-700":"bg-white border-2 border-primary-200 hover:border-primary hover:bg-primary-50"),children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"flex-1",children:e}),b&&e===K.korean&&(0,s.jsx)(o.A,{className:"h-4 w-4 md:h-5 md:w-5 text-green-500"}),b&&e===u&&e!==K.korean&&(0,s.jsx)(d,{className:"h-4 w-4 md:h-5 md:w-5 text-red-500"})]})},t))})}),b&&(0,s.jsx)(n.wL,{className:"bg-primary-50 p-3 md:p-4 flex justify-center",children:(0,s.jsx)(i.$,{onClick:()=>{if(y(null),f(!1),g<h.length-1)p(e=>e+1),v((g+2)/h.length*100);else{let t={totalQuestions:h.length,correctAnswers:h.filter(e=>e.isKnown).length,wrongAnswers:h.filter(e=>!1===e.isKnown).length,words:h.map(e=>({english:e.english,korean:e.korean,isCorrect:e.isKnown}))};localStorage.setItem("quizResult",JSON.stringify(t)),e.push("/result")}},className:"bg-secondary hover:bg-secondary-600 text-white px-4 md:px-8 h-9 md:h-10 text-sm md:text-base touch-target",children:"다음 단어"})})]}),(0,s.jsxs)("div",{className:"flex flex-wrap md:flex-nowrap justify-between gap-2",children:[(0,s.jsx)(i.$,{variant:"outline",onClick:()=>{let e=h.map(e=>({...e,isKnown:void 0}));x(e),I(e),p(0),v(0),y(null),f(!1),(0,m.oR)({title:"초기화 완료",description:"모든 단어의 학습 상태가 초기화되었습니다."})},className:"border-secondary text-secondary hover:bg-secondary-100 text-xs md:text-sm h-8 md:h-10 flex-1 touch-target",children:"초기화"}),(0,s.jsx)(i.$,{variant:"outline",onClick:()=>e.push("/stats"),className:"border-primary text-primary hover:bg-primary-100 text-xs md:text-sm h-8 md:h-10 flex-1 touch-target",children:"학습 통계"})]})]})})}},7572:(e,t,r)=>{Promise.resolve().then(r.bind(r,7252))}},e=>{var t=t=>e(e.s=t);e.O(0,[514,451,441,684,358],()=>t(7572)),_N_E=e.O()}]);